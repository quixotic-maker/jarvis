# Jarvis V3 - 产品愿景与架构设计

> **核心定位**: Jarvis不只是一个助手，它是你的**第二大脑**、**技术老师**、**科研导师**和**人生见证者**。

---

## 📋 一、产品需求全景（历史汇总 + 新需求）

### 1.1 已实现功能清单 ✅

#### 核心系统
| 功能模块 | 状态 | 说明 |
|---------|------|------|
| 25个智能Agent | ✅ | 办公/技术/学习/生活/高级AI |
| 流式对话 | ✅ | SSE实时输出 |
| Markdown流式渲染 | ✅ | 边流式边渲染（刚修复） |
| 会话管理 | ✅ | 多轮对话、历史记录 |
| 知识图谱Agent | ✅ | 实体识别、关系抽取 |
| RAG Agent | ✅ | 文档检索增强生成 |
| Agentic RAG | ✅ | 主动式检索、迭代优化 |
| MCP Agent | ✅ | 上下文管理、工具调用 |

#### API集成
| API | 状态 | 说明 |
|-----|------|------|
| DeepSeek LLM | ✅ | 核心对话引擎 |
| 和风天气 | ✅ | 天气查询 |
| NewsAPI | ✅ | 新闻资讯 |
| 高德地图 | ✅ | 路线规划（框架） |
| 百度翻译 | ✅ | 多语言翻译（框架） |

#### 人性化交互
| 功能 | 状态 | 说明 |
|------|------|------|
| 人格引擎 | ✅ | 时间感知、情感问候 |
| 快捷操作卡片 | ✅ | 一键触发常用功能 |
| 语音输入 | ✅ | Web Speech API |
| MCP工具框架 | ✅ | 8个基础工具 |

---

### 1.2 待实现功能清单 🔄

#### 从INTERACTION_DESIGN.md提取
| 功能 | 优先级 | 说明 |
|------|--------|------|
| 语音输出(TTS) | P1 | Web Speech API 语音合成 |
| 主动通知 | P1 | WebSocket实时推送 |
| 预测性建议 | P2 | 基于习惯的智能推荐 |
| 情感感知增强 | P2 | 更精准的情绪识别 |
| 多模态交互 | P3 | 图片理解（可选） |

#### 从ARCHITECTURE_V2.md提取
| 功能 | 优先级 | 说明 |
|------|--------|------|
| 长期记忆系统 | P1 | 用户身份/偏好/记忆存储 |
| 关系图谱 | P2 | 用户社交关系管理 |
| 主动智能服务 | P2 | 时间/状态/情景触发 |
| 行为模式学习 | P3 | 预测用户需求 |

---

### 1.3 🆕 新增核心需求（本次提出）

#### 🧠 第二大脑系统
| 功能 | 说明 | 可视化 |
|------|------|--------|
| **知识脑图** | 用户知识体系的三维可视化 | 3D力导向图 |
| **实时更新** | 每次对话自动提取知识点 | 动态节点生成 |
| **多维度** | 技术/生活/工作/兴趣分区 | 颜色分区+过滤 |
| **关联推荐** | 相关知识点自动关联 | 边关系展示 |

#### 👤 人物画像系统
| 功能 | 说明 | 交互方式 |
|------|------|----------|
| **初始信息** | 用户基本档案输入 | 引导式表单+自由文字 |
| **动态分析** | 实时性格/能力/兴趣分析 | 雷达图+词云 |
| **成长轨迹** | 各领域能力变化曲线 | 时间轴+折线图 |
| **可视化展示** | 立体化人物画像 | 动态卡片/3D模型 |

#### 📈 成长追踪系统
| 功能 | 说明 | 可视化 |
|------|------|--------|
| **短期成长** | 单次学习/项目的进度 | 进度条+里程碑 |
| **长期成长** | 某领域的长期积累 | 技能树+经验值 |
| **技术演进** | 随技术发展的知识更新 | 时间轴+版本树 |
| **对比分析** | 与过去的自己对比 | 雷达图叠加 |

#### 🎓 导师系统
| 功能 | 说明 | 特点 |
|------|------|------|
| **研究进度** | 科研项目进度管理 | 甘特图+里程碑 |
| **AI4Science** | 科学计算/论文/实验辅助 | 专业领域Agent |
| **文献管理** | 论文阅读、笔记、引用 | 知识图谱关联 |
| **实验记录** | 实验设计、数据、结论 | 结构化记录 |

---

## 🎯 二、产品形态重新定义

### 2.1 从"助手"到"伙伴"的转变

```
传统AI助手                    Jarvis V3
────────────                 ────────────
• 被动响应                   • 主动关怀 + 预测需求
• 工具属性                   • 伙伴属性 + 情感连接
• 单一功能                   • 全方位陪伴
• 记忆短暂                   • 长期记忆 + 成长见证
• 冷冰冰                     • 有温度 + 有个性
```

### 2.2 四大核心角色

```
┌─────────────────────────────────────────────────────────────────────────┐
│                        Jarvis V3 四大角色                                │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│   ┌─────────────────┐       ┌─────────────────┐                        │
│   │  🧠 第二大脑     │       │  👨‍🏫 技术老师    │                        │
│   │                 │       │                 │                        │
│   │ • 知识存储      │       │ • 概念讲解      │                        │
│   │ • 记忆管理      │       │ • 代码指导      │                        │
│   │ • 思维可视化    │       │ • 学习路径      │                        │
│   │ • 关联推理      │       │ • 实践练习      │                        │
│   └─────────────────┘       └─────────────────┘                        │
│                                                                         │
│   ┌─────────────────┐       ┌─────────────────┐                        │
│   │  🎓 科研导师     │       │  👁️ 人生见证者   │                        │
│   │                 │       │                 │                        │
│   │ • AI4Science    │       │ • 成长记录      │                        │
│   │ • 论文辅助      │       │ • 里程碑标记    │                        │
│   │ • 实验管理      │       │ • 回顾反思      │                        │
│   │ • 研究进度      │       │ • 鼓励支持      │                        │
│   └─────────────────┘       └─────────────────┘                        │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## 🏗️ 三、系统架构设计

### 3.1 整体架构

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                              用户界面层                                      │
│  ┌─────────────────────────────────────────────────────────────────────────┐│
│  │                         主交互区                                         ││
│  │  ┌───────────┐ ┌───────────┐ ┌───────────┐ ┌───────────┐              ││
│  │  │ 🗣️ 对话   │ │ 🧠 脑图   │ │ 👤 画像   │ │ 📈 成长   │              ││
│  │  │  Chat     │ │ BrainMap  │ │ Profile   │ │ Growth    │              ││
│  │  └───────────┘ └───────────┘ └───────────┘ └───────────┘              ││
│  └─────────────────────────────────────────────────────────────────────────┘│
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────────────────┐│
│  │                         可视化组件                                       ││
│  │  ┌───────────────────┐ ┌───────────────────┐ ┌───────────────────┐     ││
│  │  │  3D知识脑图       │ │  人物雷达图       │ │  成长时间轴       │     ││
│  │  │  (Three.js/D3)    │ │  (ECharts)        │ │  (Timeline)       │     ││
│  │  └───────────────────┘ └───────────────────┘ └───────────────────┘     ││
│  │  ┌───────────────────┐ ┌───────────────────┐ ┌───────────────────┐     ││
│  │  │  研究进度甘特图   │ │  技能树           │ │  知识卡片         │     ││
│  │  │  (Gantt)          │ │  (SkillTree)      │ │  (Cards)          │     ││
│  │  └───────────────────┘ └───────────────────┘ └───────────────────┘     ││
│  └─────────────────────────────────────────────────────────────────────────┘│
└─────────────────────────────────────────────────────────────────────────────┘
                                    │
                                    │ SSE/WebSocket
                                    ↓
┌─────────────────────────────────────────────────────────────────────────────┐
│                              核心服务层                                      │
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────────────────┐│
│  │                    PersonaEngine (人格引擎)                              ││
│  │   情感分析 │ 语气生成 │ 主动触发 │ 个性化回复 │ 角色切换              ││
│  └─────────────────────────────────────────────────────────────────────────┘│
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────────────────┐│
│  │                    MemorySystem (记忆系统)                               ││
│  │   短期记忆(对话) │ 长期记忆(用户档案) │ 知识记忆(学习内容)             ││
│  └─────────────────────────────────────────────────────────────────────────┘│
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────────────────┐│
│  │                    GrowthTracker (成长追踪)                              ││
│  │   技能点数 │ 里程碑记录 │ 学习进度 │ 能力评估 │ 趋势分析              ││
│  └─────────────────────────────────────────────────────────────────────────┘│
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ↓
┌─────────────────────────────────────────────────────────────────────────────┐
│                              Agent执行层                                     │
│                                                                              │
│  ┌─────────────┐ ┌─────────────┐ ┌─────────────┐ ┌─────────────┐          │
│  │  办公Agent  │ │  技术Agent  │ │  学习Agent  │ │  生活Agent  │          │
│  │  (7个)      │ │  (3个)      │ │  (2个)      │ │  (9个)      │          │
│  └─────────────┘ └─────────────┘ └─────────────┘ └─────────────┘          │
│                                                                              │
│  ┌─────────────┐ ┌─────────────┐ ┌─────────────┐ ┌─────────────┐          │
│  │  高级AI     │ │ 🆕 导师Agent│ │ 🆕 脑图Agent│ │ 🆕 画像Agent│          │
│  │  (4个)      │ │  研究/论文  │ │  知识构建   │ │  人物分析   │          │
│  └─────────────┘ └─────────────┘ └─────────────┘ └─────────────┘          │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ↓
┌─────────────────────────────────────────────────────────────────────────────┐
│                              数据持久层                                      │
│                                                                              │
│  ┌─────────────┐ ┌─────────────┐ ┌─────────────┐ ┌─────────────┐          │
│  │  SQLite     │ │  向量库     │ │  图数据库   │ │  时序数据   │          │
│  │  基础数据   │ │  知识嵌入   │ │  知识图谱   │ │  成长轨迹   │          │
│  └─────────────┘ └─────────────┘ └─────────────┘ └─────────────┘          │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 3.2 数据模型设计

```python
# === 用户画像系统 ===
class UserProfile:
    """用户基础档案"""
    id: str
    name: str                    # 称呼
    avatar: str                  # 头像
    bio: str                     # 自我介绍
    occupation: str              # 职业
    interests: List[str]         # 兴趣领域
    goals: List[str]             # 目标
    created_at: datetime
    
class PersonalityTrait:
    """性格特质分析"""
    user_id: str
    trait_type: str              # 特质类型
    score: float                 # 0-100分数
    evidence: List[str]          # 分析依据
    updated_at: datetime
    
class SkillAssessment:
    """技能评估"""
    user_id: str
    skill_domain: str            # 技能领域
    skill_name: str              # 技能名称
    level: int                   # 等级 1-10
    experience_points: int       # 经验值
    milestones: List[str]        # 里程碑
    updated_at: datetime

# === 知识系统 ===
class KnowledgeNode:
    """知识节点"""
    id: str
    user_id: str
    title: str                   # 知识点标题
    content: str                 # 内容摘要
    domain: str                  # 领域分类
    tags: List[str]              # 标签
    source: str                  # 来源（对话/文档/手动）
    mastery_level: float         # 掌握程度 0-1
    review_count: int            # 复习次数
    last_reviewed: datetime
    created_at: datetime
    
class KnowledgeEdge:
    """知识关联"""
    source_id: str
    target_id: str
    relation_type: str           # 关系类型
    strength: float              # 关联强度
    
# === 成长追踪系统 ===
class GrowthRecord:
    """成长记录"""
    id: str
    user_id: str
    domain: str                  # 领域
    event_type: str              # 学习/项目/成就/反思
    title: str
    description: str
    impact_score: float          # 影响分数
    skills_affected: List[str]   # 影响的技能
    created_at: datetime
    
class LearningSession:
    """学习会话"""
    id: str
    user_id: str
    topic: str                   # 学习主题
    duration_minutes: int        # 时长
    concepts_learned: List[str]  # 学到的概念
    questions_asked: int         # 提问次数
    quality_score: float         # 质量评分
    notes: str                   # 笔记
    created_at: datetime
    
class ResearchProject:
    """研究项目"""
    id: str
    user_id: str
    title: str
    description: str
    status: str                  # 进行中/已完成/暂停
    milestones: List[Milestone]  # 里程碑
    papers: List[Paper]          # 相关论文
    experiments: List[Experiment] # 实验记录
    progress_percentage: float
    started_at: datetime
    target_date: datetime
```

---

## 🎨 四、前端交互设计

### 4.1 核心页面布局

```
┌─────────────────────────────────────────────────────────────────────────────┐
│  🤖 Jarvis                    [🔍] [🔔3] [⚙️] [👤 刘同学]                   │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  📊 今日概览                                              1月15日   │   │
│  │  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐              │   │
│  │  │ 🎯 3     │ │ 📚 45min │ │ 💡 12    │ │ 🔥 7天   │              │   │
│  │  │ 待办任务 │ │ 今日学习 │ │ 新知识点 │ │ 连续活跃 │              │   │
│  │  └──────────┘ └──────────┘ └──────────┘ └──────────┘              │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  ┌───────────────────────────────────┬─────────────────────────────────┐   │
│  │                                   │                                 │   │
│  │         对话区域                  │        动态可视化区             │   │
│  │         (Chat)                    │                                 │   │
│  │                                   │   ┌─────────────────────────┐   │   │
│  │  ┌─────────────────────────────┐  │   │                         │   │   │
│  │  │ 🤖 早上好！今天我们继续...  │  │   │    🧠 知识脑图          │   │   │
│  │  └─────────────────────────────┘  │   │    [当前3D展示]         │   │   │
│  │                                   │   │                         │   │   │
│  │  ┌─────────────────────────────┐  │   │         ○ ML            │   │   │
│  │  │ 👤 帮我解释一下Transformer │  │   │        /│\              │   │   │
│  │  └─────────────────────────────┘  │   │       ○ ○ ○            │   │   │
│  │                                   │   │      DL NLP CV          │   │   │
│  │  ┌─────────────────────────────┐  │   │                         │   │   │
│  │  │ 🤖 好的！Transformer是...  │  │   └─────────────────────────┘   │   │
│  │  │                             │  │                                 │   │
│  │  │   [自注意力机制图解]       │  │   ┌─────────────────────────┐   │   │
│  │  │   [代码示例]               │  │   │  📈 最近学习趋势        │   │   │
│  │  │                             │  │   │  ~~~~~~~~~~~~~/         │   │   │
│  │  │   💡 已添加到知识图谱      │  │   │  深度学习 +15% ↑        │   │   │
│  │  └─────────────────────────────┘  │   └─────────────────────────┘   │   │
│  │                                   │                                 │   │
│  │  ┌─────────────────────────────┐  │   ┌─────────────────────────┐   │   │
│  │  │ 🎤 │ 继续问关于...    [➤]  │  │   │  👤 能力雷达            │   │   │
│  │  └─────────────────────────────┘  │   │      编程 ████████░░    │   │   │
│  │                                   │   │      数学 ██████░░░░    │   │   │
│  │  [📅日程][💡学习][🔬研究][💬聊天] │   │      沟通 ████░░░░░░    │   │   │
│  │                                   │   └─────────────────────────┘   │   │
│  └───────────────────────────────────┴─────────────────────────────────┘   │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 4.2 核心视图详解

#### 视图1: 🧠 知识脑图 (3D Mind Map)

```
┌─────────────────────────────────────────────────────────────────────────────┐
│  🧠 我的知识宇宙                          [筛选▼] [搜索🔍] [添加➕] [导出↗]│
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│   领域筛选: [全部] [技术●] [科研○] [生活○] [思考○]                        │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │                                                                     │   │
│  │                    ╭──────────╮                                     │   │
│  │                   │ 机器学习 │  ←─ 核心节点                        │   │
│  │                    ╰────┬─────╯                                     │   │
│  │              ╭──────────┼──────────╮                                │   │
│  │              │          │          │                                │   │
│  │         ╭────┴────╮ ╭───┴───╮ ╭────┴────╮                          │   │
│  │        │深度学习  │ │ 统计  │ │数据处理 │                          │   │
│  │         ╰────┬────╯ ╰───────╯ ╰─────────╯                          │   │
│  │              │                                                      │   │
│  │    ╭─────────┼─────────╮                                            │   │
│  │    │         │         │                                            │   │
│  │ ╭──┴──╮  ╭───┴───╮  ╭──┴──╮                                        │   │
│  │ │ CNN │  │  RNN  │  │ Attn│  ←─ 点击展开详情                       │   │
│  │ ╰─────╯  ╰───────╯  ╰──┬──╯                                        │   │
│  │                        │                                            │   │
│  │                   ╭────┴────╮                                       │   │
│  │                  │Transformer│  ←─ 当前学习                        │   │
│  │                   ╰─────────╯    ⭐ 掌握度: 75%                    │   │
│  │                                                                     │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  📊 知识统计: 总节点 156 | 本周新增 12 | 待复习 8 | 掌握度 68%            │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

**技术实现**:
- 3D渲染: Three.js + react-three-fiber
- 力导向布局: d3-force-3d
- 交互: 拖拽旋转、缩放、点击聚焦
- 数据: 从对话中自动提取知识点

#### 视图2: 👤 人物画像

```
┌─────────────────────────────────────────────────────────────────────────────┐
│  👤 我的成长档案                                    [编辑✏️] [分享↗] [导出]│
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌─────────────────────────────────┬───────────────────────────────────┐   │
│  │                                 │                                   │   │
│  │      ┌──────────────┐          │    📊 能力雷达图                   │   │
│  │      │   👤 头像    │          │                                   │   │
│  │      │   (动态)     │          │         编程能力                  │   │
│  │      └──────────────┘          │            ████████               │   │
│  │                                 │       ╱          ╲               │   │
│  │      刘同学                     │   数学 ██████      ██████ 沟通   │   │
│  │      研究生 · AI方向            │       ╲          ╱               │   │
│  │                                 │         ████████                  │   │
│  │      "探索AI的无限可能"         │          学习力                  │   │
│  │                                 │                                   │   │
│  │      🏷️ 标签:                  │    与上月对比: 编程 +12% ↑       │   │
│  │      [深度学习] [Python]        │                                   │   │
│  │      [科研] [阅读]              │                                   │   │
│  │                                 │                                   │   │
│  └─────────────────────────────────┴───────────────────────────────────┘   │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  🧬 性格分析 (基于对话)                                   更新于今天│   │
│  │                                                                     │   │
│  │  ┌───────────────┐ ┌───────────────┐ ┌───────────────┐            │   │
│  │  │ 🎯 目标导向   │ │ 🔬 探索精神   │ │ 📚 学习热情   │            │   │
│  │  │ ████████░░ 80%│ │ ██████████ 95%│ │ █████████░ 88%│            │   │
│  │  │ "明确知道想要 │ │ "喜欢深入研究 │ │ "持续学习新   │            │   │
│  │  │  什么"        │ │  新技术"      │ │  知识"        │            │   │
│  │  └───────────────┘ └───────────────┘ └───────────────┘            │   │
│  │                                                                     │   │
│  │  💬 分析依据: "你经常提问'为什么'，说明你有很强的探索精神..."     │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

#### 视图3: 📈 成长轨迹

```
┌─────────────────────────────────────────────────────────────────────────────┐
│  📈 成长之路                              [2024] [2025●] [2026]    [周/月/年]│
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  🏆 成就徽章                                                                │
│  ┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐                                 │
│  │ 🌟  │ │ 🔥  │ │ 📚  │ │ 💻  │ │ 🎯  │   + 12 更多                     │
│  │7天  │ │首个 │ │百日 │ │千行 │ │完成 │                                 │
│  │连续 │ │项目 │ │阅读 │ │代码 │ │目标 │                                 │
│  └─────┘ └─────┘ └─────┘ └─────┘ └─────┘                                 │
│                                                                             │
│  📊 技能成长曲线                                                            │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │     │                                              ╭─ 深度学习      │   │
│  │  10 ┤                                         ╭───╯                 │   │
│  │     │                                    ╭───╯                      │   │
│  │   8 ┤                               ╭───╯  ←─ Python               │   │
│  │     │                          ╭───╯                                │   │
│  │   6 ┤                     ╭───╯                                     │   │
│  │     │                ╭───╯                                          │   │
│  │   4 ┤           ╭───╯       ╭──────────────── 数学                  │   │
│  │     │      ╭───╯      ╭────╯                                        │   │
│  │   2 ┤ ╭───╯     ╭────╯                                              │   │
│  │     │╯    ╭────╯                                                    │   │
│  │   0 ┼────────────────────────────────────────────────────────────   │   │
│  │        1月    3月    5月    7月    9月    11月    1月               │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  🎯 里程碑时间轴                                                            │
│  ──●────────●──────────●────────────●────────●──────────→                  │
│   入门      首个      论文        项目      当前                           │
│   Python   项目     发表        上线                                       │
│   2024.3   2024.6   2024.10    2025.1                                      │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

#### 视图4: 🔬 研究工作台

```
┌─────────────────────────────────────────────────────────────────────────────┐
│  🔬 研究工作台                               [新建项目➕] [文献库📚] [实验📋]│
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  📁 当前项目: Transformer在时序预测中的应用                    进度: 65%   │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │                                                                     │   │
│  │  ┌─────────────────────────────────────────────────────────────┐   │   │
│  │  │  ■■■■■■■■■■■■■■■■■■■■■□□□□□□□□□□                  65%       │   │   │
│  │  └─────────────────────────────────────────────────────────────┘   │   │
│  │                                                                     │   │
│  │  📍 里程碑                                                         │   │
│  │  ✅ 文献调研 ─── ✅ 方法设计 ─── 🔄 实验 ─── ○ 论文 ─── ○ 发表   │   │
│  │      完成          完成         进行中       待开始      待开始     │   │
│  │                                                                     │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  ┌─────────────────────────────────┬───────────────────────────────────┐   │
│  │  📚 相关文献 (15篇)             │  📝 最近笔记                      │   │
│  │                                 │                                   │   │
│  │  📄 Attention Is All You Need  │  📌 实验记录 2025-01-15           │   │
│  │     ⭐⭐⭐⭐⭐  已精读           │                                   │   │
│  │                                 │  - 尝试了新的位置编码方案         │   │
│  │  📄 BERT: Pre-training...      │  - RMSE从0.15降到0.12            │   │
│  │     ⭐⭐⭐⭐  已读              │  - 下一步: 调整学习率             │   │
│  │                                 │                                   │   │
│  │  📄 Informer: Beyond...        │  ────────────────────────         │   │
│  │     ⭐⭐⭐  阅读中              │  📌 想法 2025-01-14               │   │
│  │                                 │                                   │   │
│  │  [查看全部...]                  │  考虑引入图神经网络来建模...      │   │
│  └─────────────────────────────────┴───────────────────────────────────┘   │
│                                                                             │
│  💬 AI导师建议: "根据你的实验进度，建议下周完成对比实验，这样有充足时间   │
│     进行结果分析。我注意到你的模型在长序列上表现下降，要不要讨论一下？"   │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 4.3 语音交互界面设计

#### 语音输入/输出UI

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                          语音交互模式                                        │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│                         ┌───────────────────┐                               │
│                         │                   │                               │
│                         │    🎤 正在聆听    │                               │
│                         │                   │                               │
│                         │   ████████████    │   ←─ 音量可视化波形          │
│                         │   ██████████████  │                               │
│                         │   ████████████    │                               │
│                         │                   │                               │
│                         │   "帮我查一下..."│   ←─ 实时转录文字            │
│                         │                   │                               │
│                         └───────────────────┘                               │
│                                                                             │
│                  ┌─────────┐        ┌─────────┐                            │
│                  │ 🔴 停止 │        │ ⚙️ 设置 │                            │
│                  └─────────┘        └─────────┘                            │
│                                                                             │
│  提示: 说 "嘿Jarvis" 唤醒 | 说 "停止" 结束                                  │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────┐
│                          语音播报中                                          │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│                         ┌───────────────────┐                               │
│                         │                   │                               │
│                         │    🔊 正在播报    │                               │
│                         │                   │                               │
│                         │   ~~~~~~~~~~~~~~~~│   ←─ 声波动画                │
│                         │  ~~~~~~~~~~~~~~~~~~│                               │
│                         │   ~~~~~~~~~~~~~~~~│                               │
│                         │                   │                               │
│                         │  "今天天气..."    │   ←─ 当前播报文字            │
│                         │      ▓▓░░░░░░░░  │   ←─ 播报进度                │
│                         │                   │                               │
│                         └───────────────────┘                               │
│                                                                             │
│                  ┌─────────┐        ┌─────────┐                            │
│                  │ ⏸️ 暂停 │        │ ⏭️ 跳过 │                            │
│                  └─────────┘        └─────────┘                            │
│                                                                             │
│  ⚙️ 语音设置: 音色 女声 | 语速 正常 | 音量 80%                              │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 4.4 Agent操作面板设计

#### Agent选择器（卡片网格）

```
┌─────────────────────────────────────────────────────────────────────────────┐
│  🤖 Agent工作坊                         [搜索🔍] [分类筛选▼] [收藏⭐]       │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  📋 办公效率 (7个)                                                          │
│  ┌──────────────┐ ┌──────────────┐ ┌──────────────┐ ┌──────────────┐      │
│  │  📅          │ │  ✅          │ │  ✉️          │ │  🤝          │      │
│  │ Schedule     │ │ Task         │ │ Email        │ │ Meeting      │      │
│  │ 日程管理     │ │ 任务管理     │ │ 邮件助手     │ │ 会议管理     │      │
│  │              │ │              │ │              │ │              │      │
│  │ 使用 3次     │ │ 使用 12次    │ │ 使用 5次     │ │ 使用 2次     │      │
│  │ [使用]       │ │ [使用]       │ │ [使用]       │ │ [使用]       │      │
│  └──────────────┘ └──────────────┘ └──────────────┘ └──────────────┘      │
│  ┌──────────────┐ ┌──────────────┐ ┌──────────────┐                       │
│  │  📁          │ │  📝          │ │  ⏰          │                       │
│  │ File         │ │ Note         │ │ Reminder     │                       │
│  │ 文件管理     │ │ 笔记管理     │ │ 提醒助手     │                       │
│  │              │ │              │ │              │                       │
│  │ 使用 8次     │ │ 使用 15次    │ │ 使用 6次     │                       │
│  │ [使用]       │ │ [使用]       │ │ [使用]       │                       │
│  └──────────────┘ └──────────────┘ └──────────────┘                       │
│                                                                             │
│  💻 技术开发 (3个)                                                          │
│  ┌──────────────┐ ┌──────────────┐ ┌──────────────┐                       │
│  │  💻          │ │  📊          │ │  🔢          │                       │
│  │ Code         │ │ DataAnalysis │ │ Calculation  │                       │
│  │ 代码助手     │ │ 数据分析     │ │ 数学计算     │                       │
│  │              │ │              │ │              │                       │
│  │ 使用 20次    │ │ 使用 7次     │ │ 使用 4次     │                       │
│  │ [使用]       │ │ [使用]       │ │ [使用]       │                       │
│  └──────────────┘ └──────────────┘ └──────────────┘                       │
│                                                                             │
│  [显示更多分类...]                                                          │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

#### Agent对话界面（以CodeAgent为例）

```
┌─────────────────────────────────────────────────────────────────────────────┐
│  💻 Code Agent                          [最小化_] [帮助?] [关闭✕]          │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  🤖 我可以帮你：                                                    │   │
│  │  • 生成代码  • 解释代码  • 优化代码  • 修复Bug  • 代码转换       │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  ┌───────────────────────────────────────────────────────────────────────┐ │
│  │ 👤 帮我写一个Python快速排序算法                                      │ │
│  └───────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
│  ┌───────────────────────────────────────────────────────────────────────┐ │
│  │ 🤖 好的！这是一个优雅的快速排序实现：                                │ │
│  │                                                                       │ │
│  │  ┌────────────────────────────────────────────────────────────────┐  │ │
│  │  │ python                                          [复制📋] [运行▶]│  │ │
│  │  │ def quicksort(arr):                                            │  │ │
│  │  │     if len(arr) <= 1:                                          │  │ │
│  │  │         return arr                                             │  │ │
│  │  │     pivot = arr[len(arr) // 2]                                 │  │ │
│  │  │     left = [x for x in arr if x < pivot]                       │  │ │
│  │  │     middle = [x for x in arr if x == pivot]                    │  │ │
│  │  │     right = [x for x in arr if x > pivot]                      │  │ │
│  │  │     return quicksort(left) + middle + quicksort(right)         │  │ │
│  │  └────────────────────────────────────────────────────────────────┘  │ │
│  │                                                                       │ │
│  │  💡 代码解释：                                                        │ │
│  │  1. 选择中间元素作为基准                                             │ │
│  │  2. 将数组分为小于、等于、大于基准的三部分                           │ │
│  │  3. 递归排序左右两部分                                               │ │
│  │                                                                       │ │
│  │  ⏱️ 时间复杂度: O(n log n)  📦 空间复杂度: O(n)                     │ │
│  │                                                                       │ │
│  │  ┌────────────────────────────────────────────────────────────────┐  │ │
│  │  │ [保存到笔记] [添加到收藏] [在编辑器中打开] [继续优化]           │  │ │
│  │  └────────────────────────────────────────────────────────────────┘  │ │
│  └───────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
│  ┌───────────────────────────────────────────────────────────────────────┐ │
│  │ 💬 继续提问或输入新需求...                                    [发送→]│ │
│  └───────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 4.5 结果展示卡片设计

#### 天气Agent结果卡片

```
┌─────────────────────────────────────────────────────────────────────────────┐
│  ☁️ 北京天气                                          [刷新🔄] [详情→]     │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌─────────────────────────────────┬───────────────────────────────────┐   │
│  │                                 │                                   │   │
│  │          ☁️                     │   🌡️ 温度                        │   │
│  │         多云                     │   -3°C / 2°C                     │   │
│  │                                 │                                   │   │
│  │        -3°C                     │   💧 湿度: 45%                    │   │
│  │      体感 -8°C                  │   💨 风速: 北风3级                │   │
│  │                                 │   👁️ 能见度: 10km                │   │
│  │                                 │   🌅 日出 07:32                   │   │
│  └─────────────────────────────────┴───────────────────────────────────┘   │
│                                                                             │
│  📅 未来7天                                                                 │
│  ┌──────┐ ┌──────┐ ┌──────┐ ┌──────┐ ┌──────┐ ┌──────┐ ┌──────┐          │
│  │ 周四 │ │ 周五 │ │ 周六 │ │ 周日 │ │ 周一 │ │ 周二 │ │ 周三 │          │
│  │  ☀️  │ │  🌥️  │ │  ☁️  │ │  🌧️  │ │  ❄️  │ │  ☀️  │ │  🌤️  │          │
│  │-2/3°C│ │ 0/5°C│ │-1/4°C│ │ 2/7°C│ │-4/1°C│ │-2/5°C│ │ 1/6°C│          │
│  └──────┘ └──────┘ └──────┘ └──────┘ └──────┘ └──────┘ └──────┘          │
│                                                                             │
│  💡 温馨提示                                                                │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │ • 今日温度较低，建议穿羽绒服                                        │   │
│  │ • 空气质量良好，适合户外活动                                        │   │
│  │ • 周日有降雨，注意携带雨具                                          │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

#### 日程Agent结果卡片

```
┌─────────────────────────────────────────────────────────────────────────────┐
│  📅 今日日程                                     [新建+] [周视图] [月视图]  │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  2026年1月15日 星期三                             📊 今日完成度: 60%       │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │ 🔴 09:00 - 10:00    [进行中]                                        │   │
│  │ ────────────────────────────────────────────────────────────────   │   │
│  │                                                                     │   │
│  │ 📍 团队晨会                                                         │   │
│  │ 📌 会议室A · 线下                                                   │   │
│  │ 👥 参会人: 张三、李四、王五 (+3)                                   │   │
│  │                                                                     │   │
│  │ 📋 议程:                                                            │   │
│  │ 1. 项目进度同步                                                     │   │
│  │ 2. 本周工作安排                                                     │   │
│  │                                                                     │   │
│  │ [编辑] [会议纪要] [提醒设置] [取消会议]                            │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │ 🟡 14:00 - 16:00    [待开始 · 还有4小时]                           │   │
│  │ ────────────────────────────────────────────────────────────────   │   │
│  │                                                                     │   │
│  │ 🔬 项目评审会议                                                     │   │
│  │ 📌 线上会议 · Zoom链接                                              │   │
│  │ 👥 参会人: 李总、产品团队                                          │   │
│  │                                                                     │   │
│  │ 📎 附件: 项目报告.pptx                                              │   │
│  │                                                                     │   │
│  │ [编辑] [加入会议] [准备材料] [取消]                                │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │ ⚪ 18:00 - 19:00    [待开始]                                        │   │
│  │ ────────────────────────────────────────────────────────────────   │   │
│  │                                                                     │   │
│  │ ☕ 1:1沟通 - 小明                                                   │   │
│  │ 📌 咖啡厅 · 线下                                                    │   │
│  │                                                                     │   │
│  │ [编辑] [导航] [推迟] [取消]                                        │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  💡 智能建议: 评审会议前1小时提醒你准备材料                                │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

#### 翻译Agent结果卡片

```
┌─────────────────────────────────────────────────────────────────────────────┐
│  🌐 翻译助手                    [互换⇄] [复制📋] [朗读🔊] [保存💾]         │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌─────────────────────────────────┬───────────────────────────────────┐   │
│  │  中文（自动检测） ▼             │   English ▼                       │   │
│  │                                 │                                   │   │
│  │  深度学习是机器学习的一个分支， │   Deep learning is a branch of    │   │
│  │  它基于人工神经网络，尤其是深   │   machine learning based on       │   │
│  │  层神经网络。                   │   artificial neural networks,     │   │
│  │                                 │   especially deep neural networks.│   │
│  │                                 │                                   │   │
│  │                                 │                                   │   │
│  │  [清除]              字数: 28   │   [朗读🔊]           字数: 67     │   │
│  └─────────────────────────────────┴───────────────────────────────────┘   │
│                                                                             │
│  🎯 翻译选项                                                                │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  语气: ○ 正式  ●通用  ○ 口语                                       │   │
│  │  领域: ○ 通用  ● 技术  ○ 商务  ○ 学术                              │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  📚 历史翻译 (3条)                                                          │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  "Hello World" → "你好世界"                          2分钟前        │   │
│  │  "机器学习" → "Machine Learning"                      5分钟前        │   │
│  │  [查看更多...]                                                      │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

#### 数据分析Agent结果卡片

```
┌─────────────────────────────────────────────────────────────────────────────┐
│  📊 数据分析结果                         [导出📥] [分享↗] [重新分析🔄]     │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  📈 销售数据趋势分析                                        2026-01-15      │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  月度销售趋势                                                       │   │
│  │     │                                              ╱──────           │   │
│  │ 100K┤                                        ╱────╯                  │   │
│  │     │                                   ╱───╯                        │   │
│  │  80K┤                              ╱───╯                             │   │
│  │     │                         ╱───╯                                  │   │
│  │  60K┤                    ╱───╯                                       │   │
│  │     │               ╱───╯                                            │   │
│  │  40K┤          ╱───╯                                                 │   │
│  │     │     ╱───╯                                                      │   │
│  │  20K┤╱───╯                                                           │   │
│  │     ├────────────────────────────────────────────────────────────   │   │
│  │       1月   2月   3月   4月   5月   6月   7月   8月   9月   10月      │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  📊 关键指标                                                                │
│  ┌──────────────┐ ┌──────────────┐ ┌──────────────┐ ┌──────────────┐      │
│  │ 总销售额     │ │ 平均订单     │ │ 转化率       │ │ 增长率       │      │
│  │ ¥950,000     │ │ ¥850         │ │ 12.5%        │ │ +25% ↑       │      │
│  └──────────────┘ └──────────────┘ └──────────────┘ └──────────────┘      │
│                                                                             │
│  🔍 洞察发现                                                                │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  ✅ 销售额呈持续增长趋势，月均增长率约 8.3%                          │   │
│  │  ⚠️  8月出现小幅回落，可能与季节性因素有关                          │   │
│  │  💡 建议加强第三季度的营销投入                                      │   │
│  │  📈 预测下月销售额约 ¥105,000 (置信度: 85%)                         │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  💾 数据来源: sales_data_2025.csv  |  分析模型: 时间序列 + 回归分析        │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 4.6 MCP工具操作面板

```
┌─────────────────────────────────────────────────────────────────────────────┐
│  🔧 MCP工具箱                         [搜索🔍] [收藏⭐] [历史📜] [设置⚙️] │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  📁 文件系统工具                                                            │
│  ┌──────────────┐ ┌──────────────┐ ┌──────────────┐ ┌──────────────┐      │
│  │  📄          │ │  ✏️          │ │  🔍          │ │  📋          │      │
│  │ 文件读取     │ │ 文件写入     │ │ 文件搜索     │ │ 目录列表     │      │
│  │              │ │              │ │              │ │              │      │
│  │ FileRead     │ │ FileWrite    │ │ FileSearch   │ │ FileList     │      │
│  │ [使用]       │ │ [使用]       │ │ [使用]       │ │ [使用]       │      │
│  └──────────────┘ └──────────────┘ └──────────────┘ └──────────────┘      │
│                                                                             │
│  🌐 网络工具                                                                │
│  ┌──────────────┐ ┌──────────────┐                                         │
│  │  🌍          │ │  📰          │                                         │
│  │ HTTP请求     │ │ 网页抓取     │                                         │
│  │              │ │              │                                         │
│  │ HttpRequest  │ │ WebScrape    │                                         │
│  │ [使用]       │ │ [使用]       │                                         │
│  └──────────────┘ └──────────────┘                                         │
│                                                                             │
│  💾 数据库工具                                                              │
│  ┌──────────────┐ ┌──────────────┐                                         │
│  │  🗄️          │ │  ⚡          │                                         │
│  │ 数据库查询   │ │ Shell命令    │                                         │
│  │              │ │              │                                         │
│  │ DBQuery      │ │ ShellCmd     │                                         │
│  │ [使用]       │ │ [使用]       │                                         │
│  └──────────────┘ └──────────────┘                                         │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘

// 工具使用弹窗（以FileRead为例）
┌─────────────────────────────────────────────────────────────────────────────┐
│  📄 文件读取工具                                        [最小化_] [关闭✕]   │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  📌 工具说明                                                                │
│  读取指定路径的文件内容，支持文本文件和二进制文件                           │
│                                                                             │
│  ⚙️ 参数设置                                                                │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │                                                                     │   │
│  │  文件路径: [/home/user/documents/report.txt        ] [浏览...]     │   │
│  │                                                                     │   │
│  │  编码格式: [UTF-8 ▼]                                                │   │
│  │                                                                     │   │
│  │  读取模式: ● 全文  ○ 指定行数  ○ 搜索关键词                        │   │
│  │                                                                     │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  📤 执行结果                                                                │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │                                                                     │   │
│  │  ✅ 读取成功！                                                      │   │
│  │                                                                     │   │
│  │  文件大小: 2.3 KB                                                   │   │
│  │  行数: 45                                                           │   │
│  │  字符数: 1,256                                                      │   │
│  │                                                                     │   │
│  │  ┌────────────────────────────────────────────────────────────┐    │   │
│  │  │ 项目进度报告                                                │    │   │
│  │  │ ═══════════                                                │    │   │
│  │  │                                                            │    │   │
│  │  │ 一、项目概况                                               │    │   │
│  │  │ 本项目于2025年12月启动...                                  │    │   │
│  │  │                                                            │    │   │
│  │  │ [显示完整内容...]                                          │    │   │
│  │  └────────────────────────────────────────────────────────────┘    │   │
│  │                                                                     │   │
│  │  [复制内容] [保存到笔记] [AI分析] [关闭]                           │   │
│  │                                                                     │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 4.7 用户引导流程

#### 首次使用引导

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                                                                             │
│                        ✨ 欢迎来到 Jarvis ✨                                │
│                                                                             │
│                     我是你的第二大脑、学习伙伴和成长见证者                   │
│                                                                             │
│  ───────────────────────────────────────────────────────────────────────   │
│                                                                             │
│     让我更好地了解你，这样我才能真正成为你的专属助手 💫                     │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │                                                                     │   │
│  │   Step 1/3: 基本信息                                               │   │
│  │                                                                     │   │
│  │   称呼: [________________]  希望我怎么叫你？                       │   │
│  │                                                                     │   │
│  │   身份: ○ 学生  ○ 职场人  ○ 研究人员  ○ 自由职业  ○ 其他          │   │
│  │                                                                     │   │
│  │   领域: □ 计算机/AI  □ 数学  □ 物理  □ 金融  □ 设计  □ 其他      │   │
│  │                                                                     │   │
│  │                                                       [下一步 →]   │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│                              ○ ─ ─ ─                                       │
│                            1   2   3                                       │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────┐
│                                                                             │
│   Step 2/3: 告诉我更多（可选）                                             │
│                                                                             │
│   你可以用任何方式介绍自己，比如:                                          │
│   • 你正在学习或研究什么？                                                 │
│   • 你的目标是什么？                                                       │
│   • 你希望我帮你做什么？                                                   │
│                                                                             │
│   ┌─────────────────────────────────────────────────────────────────────┐ │
│   │                                                                     │ │
│   │  我是一名AI方向的研究生，正在研究Transformer在时序预测中的应用。   │ │
│   │  我希望能系统地学习深度学习，同时管理好我的研究项目。              │ │
│   │  我有时候容易分心，希望你能帮我保持专注...                         │ │
│   │                                                                     │ │
│   │                                                                     │ │
│   └─────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
│                                            [← 上一步]  [下一步 →]          │
└─────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────┐
│                                                                             │
│   Step 3/3: 我的角色偏好                                                   │
│                                                                             │
│   你希望我主要扮演什么角色？（可多选，我会根据场景自动切换）               │
│                                                                             │
│   ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐          │
│   │ ☑️ 🧠 第二大脑  │  │ ☑️ 👨‍🏫 技术老师 │  │ ☐ 🎓 科研导师   │          │
│   │                 │  │                 │  │                 │          │
│   │ 帮我记录和整理  │  │ 解答技术问题    │  │ 指导研究方向    │          │
│   │ 知识，构建知识  │  │ 制定学习计划    │  │ 管理研究进度    │          │
│   │ 图谱            │  │ 代码辅导        │  │ 论文写作帮助    │          │
│   └─────────────────┘  └─────────────────┘  └─────────────────┘          │
│                                                                             │
│   ┌─────────────────┐  ┌─────────────────┐                                │
│   │ ☐ 👁️ 人生见证者│  │ ☑️ 🤖 智能助手  │                                │
│   │                 │  │                 │                                │
│   │ 记录成长轨迹    │  │ 日程管理        │                                │
│   │ 回顾和鼓励      │  │ 提醒和待办      │                                │
│   │ 目标追踪        │  │ 信息查询        │                                │
│   └─────────────────┘  └─────────────────┘                                │
│                                                                             │
│                                            [← 上一步]  [开始使用 🚀]       │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 🔧 五、技术实现方案

### 5.1 前端技术栈

```typescript
// 核心框架
React 18 + TypeScript + Vite

// 状态管理
Zustand / Jotai (轻量级)

// 路由
React Router v6

// UI组件
Tailwind CSS + Headless UI
Framer Motion (动画)

// 可视化
Three.js + react-three-fiber (3D知识图谱)
ECharts / Recharts (图表)
D3.js (复杂可视化)

// 通信
Server-Sent Events (流式对话)
WebSocket (实时通知)

// 语音
Web Speech API (识别+合成)
```

### 5.2 后端技术栈

```python
# 核心框架
FastAPI + SQLAlchemy + Pydantic v2

# 数据库
SQLite (基础数据)
ChromaDB / FAISS (向量存储)
NetworkX (图计算)

# AI/ML
LangChain (Agent编排)
DeepSeek API (LLM)
Sentence Transformers (Embedding)

# 实时通信
SSE (流式响应)
WebSocket (主动推送)

# 任务调度
APScheduler (定时任务)
Celery (后台任务，可选)
```

### 5.3 新增Agent设计

```python
# 1. BrainMapAgent - 知识脑图Agent
class BrainMapAgent(BaseAgent):
    """负责知识图谱的构建和查询"""
    async def extract_knowledge(self, conversation: str) -> List[KnowledgeNode]
    async def build_connections(self, nodes: List[str]) -> List[KnowledgeEdge]
    async def query_related(self, topic: str, depth: int) -> SubGraph
    async def suggest_review(self, user_id: str) -> List[KnowledgeNode]

# 2. ProfileAgent - 人物画像Agent
class ProfileAgent(BaseAgent):
    """负责用户画像的分析和更新"""
    async def analyze_personality(self, conversations: List[str]) -> PersonalityProfile
    async def assess_skills(self, activities: List[Activity]) -> SkillAssessment
    async def update_profile(self, user_id: str, new_data: dict) -> UserProfile
    async def generate_insights(self, user_id: str) -> List[Insight]

# 3. GrowthAgent - 成长追踪Agent
class GrowthAgent(BaseAgent):
    """负责成长记录和分析"""
    async def record_learning(self, session: LearningSession) -> GrowthRecord
    async def calculate_progress(self, user_id: str, domain: str) -> ProgressReport
    async def set_milestone(self, user_id: str, milestone: Milestone) -> bool
    async def generate_review(self, user_id: str, period: str) -> ReviewReport

# 4. MentorAgent - 导师Agent
class MentorAgent(BaseAgent):
    """AI4Science导师功能"""
    async def guide_research(self, project: ResearchProject) -> Guidance
    async def review_paper(self, paper_draft: str) -> Review
    async def suggest_experiments(self, hypothesis: str) -> List[Experiment]
    async def analyze_results(self, data: ExperimentData) -> Analysis
```

---

## 📅 六、实现优先级与路线图

### Phase 1: 核心基础 (1-2周)

**目标**: 完善基础体验，修复现有问题

| 任务 | 优先级 | 状态 |
|------|--------|------|
| Markdown流式渲染 | P0 | ✅ 完成 |
| 语音输出(TTS) | P1 | 待开发 |
| 用户档案系统 | P1 | 待开发 |
| 首次引导流程 | P1 | 待开发 |

### Phase 2: 知识系统 (2-3周)

**目标**: 构建第二大脑核心

| 任务 | 优先级 | 说明 |
|------|--------|------|
| 知识提取引擎 | P1 | 从对话自动提取知识点 |
| 2D知识图谱展示 | P1 | 基础可视化 |
| 3D知识脑图 | P2 | Three.js实现 |
| 知识复习系统 | P2 | 间隔重复算法 |

### Phase 3: 人物画像 (2周)

**目标**: 构建用户画像系统

| 任务 | 优先级 | 说明 |
|------|--------|------|
| 性格分析引擎 | P1 | 基于对话的分析 |
| 能力雷达图 | P1 | ECharts实现 |
| 动态更新机制 | P2 | 实时刷新 |

### Phase 4: 成长系统 (2周)

**目标**: 成长追踪与可视化

| 任务 | 优先级 | 说明 |
|------|--------|------|
| 学习记录系统 | P1 | 自动记录学习活动 |
| 成长曲线 | P1 | 时间轴可视化 |
| 成就系统 | P2 | 徽章和里程碑 |
| 技能树 | P2 | 游戏化展示 |

### Phase 5: 导师系统 (2-3周)

**目标**: AI4Science导师功能

| 任务 | 优先级 | 说明 |
|------|--------|------|
| 研究项目管理 | P1 | 项目/里程碑/进度 |
| 文献管理集成 | P2 | 论文阅读笔记 |
| 实验记录系统 | P2 | 结构化记录 |
| 智能建议 | P2 | 基于进度的建议 |

---

## 🎯 七、成功指标

### 用户体验指标
- 日活跃对话数 > 10次
- 知识图谱节点增长率 > 5个/周
- 用户满意度评分 > 4.5/5

### 技术指标
- 响应延迟 < 500ms (首字)
- 知识提取准确率 > 85%
- 人格分析准确率 > 80%

### 业务指标
- 7日留存率 > 60%
- 功能使用覆盖率 > 70%
- 用户反馈响应率 100%

---

## 📝 附录：用户故事

### 故事1: 学习新知识
> "我想学习Transformer"
> 
> Jarvis: 
> 1. 检测到学习意图
> 2. 评估当前知识水平（通过历史对话）
> 3. 制定个性化学习路径
> 4. 讲解过程中自动构建知识图谱
> 5. 学习后更新技能评估
> 6. 安排间隔复习提醒

### 故事2: 研究项目
> "帮我创建一个新的研究项目"
> 
> Jarvis:
> 1. 引导填写项目信息
> 2. 根据主题推荐相关文献
> 3. 生成初步研究计划
> 4. 创建里程碑和时间线
> 5. 持续跟踪进度
> 6. 提供阶段性建议

### 故事3: 回顾成长
> "我这个月学了什么？"
> 
> Jarvis:
> 1. 汇总本月学习记录
> 2. 展示知识图谱变化
> 3. 显示技能成长曲线
> 4. 列出达成的里程碑
> 5. 给出成长点评和建议

---

*文档版本: V3.0*
*更新日期: 2026-01-15*
*作者: Jarvis Team*
